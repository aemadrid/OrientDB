<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en" xmlns="http://www.w3.org/1999/html"><!--<![endif]-->
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width" />
  <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
  <title>Chat |  OrientDB</title>
  <title>Chat</title>
  <link href="../stylesheets/foundation.min.css" media="screen" rel="stylesheet" type="text/css" />
<link href="../stylesheets/app.css" media="screen" rel="stylesheet" type="text/css" />
  <script src="../javascripts/modernizr.foundation.js" type="text/javascript"></script>
  
</head>
<body class="orientdb orientdb_community orientdb_community_chat">

<header>
  <div class="row">
    <div class="five columns">
      <h1>
        <a href="/orientdb/">
          Orient<span class="highl">DB</span>
        </a>
        <span class="subtitle">The Document/Graph NoSQL Database</span>
      </h1>
    </div>
    <div class="seven columns right">
      <ul class="inline-list">
        <li><a href="/orientdb/"> Home</a></li>
<li><a href="/orientdb/about.html"> About</a></li>
<li><a href="/orientdb/wiki/Home.html"> Documentation</a></li>
<li><a href="/orientdb/wiki/Download.html"> Downloads</a></li>
<li class="active"><a href="/orientdb/community.html"> Community</a></li>
      </ul>
    </div>
  </div>
</header>


<div class="page-header">
  <div class="row">
    <div class="twelve columns">
      <h2>
        <i class="icon-orientdb"></i>
        Chat
        
          <ul class="bcs">
          
            <li><a href="/orientdb/community.html" class="nr1">Community</a></li>
          
          </ul>
        
        
      </h2>
    </div>
  </div>
</div>

<div id="main" class="row content">

  <h3>Chat Room</h3>

  <div class="twelve columns" role="content">
    <dl id='chatMessaagesBoard'></dl>
  </div>

  <div class="row">
    <div class="three columns">
      <input type='text' id='chatUserName' placeholder='Name'>
    </div>
    <div class="nine columns">
      <input type='text' id='chatMessage' placeholder='Message'>
    </div>
  </div>

  <div class="twelve columns" role="content">
    <div id='chatErrorMessage'></div>
  </div>

</div>


<footer>
  <div class="row">
    <div class="six columns">
      <ul class="inline-list">
        <li><a href="/orientdb/"> Home</a></li>
<li><a href="/orientdb/about.html"> About</a></li>
<li><a href="/orientdb/wiki/Home.html"> Documentation</a></li>
<li><a href="/orientdb/wiki/Download.html"> Downloads</a></li>
<li class="active"><a href="/orientdb/community.html"> Community</a></li>
      </ul>
    </div>
    <div class="six columns">
      <p class="copyright">
        Copyright &copy; 2011-2012 NuvolaBase Ltd. <br/>
        <span class="small">NuvolaBase is a registered trademark. All Rights Reserved.</span>
      </p>
    </div>
  </div>
</footer>

<script src="../javascripts/app.js" type="text/javascript"></script>
    <script id="message" type="text/html">
    <dt class="message {{klass}}">{{user}}</dt>
    <dd>{{text}}</dd>
  </script>
  <script type='text/javascript' src='https://cdn.firebase.com/v0/firebase.js'></script>
  <script type='text/javascript'>
    // Get the database
    var chatDataRef = new Firebase('https://orientdb.firebaseio.com/chat/');
    // Send message on Enter key
    $('#chatMessage').keypress(function (e) {
      if (e.keyCode == 13) {
        var name = $('#chatUserName').val();
        var text = $('#chatMessage').val();
        chatDataRef.push({name: name, text: text});
        $('#chatMessage').val('');
      }
    });
    // Send the chat message out
    function printChatMessage(userName, text) {
      var currName = $('#chatUserName').val();
      var klass = currName == userName ? 'mine' : 'other';
      var ctx = { klass: klass, user: userName, text: text};
      var html = ich.message(ctx);
      $(html).appendTo($('#chatMessaagesBoard'));
      $('#chatMessaagesBoard')[0].scrollTop = $('#chatMessaagesBoard')[0].scrollHeight;
    }
    // Update the message board on outside chat message
    chatDataRef.on('child_added', function (snapshot) {
      var message = snapshot.val();
      printChatMessage(message.name, message.text);
    })
  </script>


</body>
</html>