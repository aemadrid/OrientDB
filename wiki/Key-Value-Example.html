<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en" xmlns="http://www.w3.org/1999/html"><!--<![endif]-->
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width" />
  <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
  <title>Key Value Example |  OrientDB</title>
  <title>Key Value Example</title>
  <link href="../stylesheets/foundation.min.css" media="screen" rel="stylesheet" type="text/css" />
<link href="../stylesheets/app.css" media="screen" rel="stylesheet" type="text/css" />
  <script src="../javascripts/modernizr.foundation.js" type="text/javascript"></script>
  
</head>
<body class="orientdb orientdb_wiki orientdb_wiki_Key-Value-Example">

<header>
  <div class="row">
    <div class="five columns">
      <h1>
        <a href="/orientdb/">
          Orient<span class="highl">DB</span>
        </a>
        <span class="subtitle">The Document/Graph NoSQL Database</span>
      </h1>
    </div>
    <div class="seven columns right">
      <ul class="inline-list">
        <li><a href="/orientdb/"> Home</a></li>
<li><a href="/orientdb/about.html"> About</a></li>
<li class="active"><a href="/orientdb/wiki/Home.html"> Documentation</a></li>
<li><a href="/orientdb/wiki/Download.html"> Downloads</a></li>
<li><a href="/orientdb/community.html"> Community</a></li>
      </ul>
    </div>
  </div>
</header>


<div class="page-header">
  <div class="row">
    <div class="twelve columns">
      <h2>
        <i class="icon-orientdb"></i>
        Key Value Example
        
          <ul class="bcs">
          
            <li><a href="/orientdb/wiki/Home.html" class="nr1">Home</a></li>
          
          </ul>
        
        
      </h2>
    </div>
  </div>
</div>

<div id="main" class="row wiki">

  <div class="twelve columns content" role="content">

    <h3>Bucket/Key/Value paradigm as replacement of the Relational DBMS</h3>

<p>This example wants to demonstrate that it's possible and easy to use the Bucket/Key/Value approach even to build a complex application. In this example we're going to compare this new approach with the classic Relational DBMS way. In this article we use <a href="http://www.orientechnologies.com/orient-kv.htm">Orient Key/Value Server</a> but it can be applied to any other Key/Value engine that supports buckets.</p>

<p>Why to use a Key/Value Server in favor to a Relational DBMS?</p>

<ul>
<li>Because it's faster dued to the reduced complexity of the model in comparison to the Relational</li>
<li>It's schema-less and allow more flexibility when the domain model changes</li>
<li>Easier to serialize records to write on file or send/receive over the network</li>
<li>Easier to browse and debug, because you can use any Web Browser</li>
</ul><p>Before to start we remember the 3 basic concepts:</p>

<ul>
<li>Buckets: group the key/value pairs in a logical sense. A sort of collections of entries</li>
<li>Keys: are the unique ids used to get/update/delete the associated value</li>
<li>Values: are the values associated to the buckets/keys pair. Values can be any kind of documents</li>
</ul><p>In our example we'll use Buckets to group key/value entries by types. The role of the Key will be the same of the "Primary Key" in the Relational Model. Values will contain the record columns but in a unique field using the <a href="http://www.json.org">JSON</a> format.</p>

<h4>Usage of the Bucket/Key/Value model</h4>

<div class="highlight"><pre>  <span class="nl">Bucket:</span><span class="n">customer</span>
   <span class="o">|</span>
   <span class="o">+-----&gt;</span> <span class="n">orient</span><span class="o">=</span><span class="n">Orient</span> <span class="n">Technologies</span>
   <span class="o">+-----&gt;</span> <span class="n">google</span><span class="o">=</span><span class="n">Google</span> <span class="n">Incorporated</span>
  
  <span class="nl">Bucket:</span><span class="n">order</span>
   <span class="o">|</span>
   <span class="o">+-----&gt;</span> <span class="n">last</span><span class="o">=</span><span class="mi">3455</span>
   <span class="o">+-----&gt;</span> <span class="mi">3455</span><span class="o">={</span> <span class="s">"customer"</span><span class="o">:</span><span class="s">"ibm"</span><span class="o">,</span>
                  <span class="s">"items"</span> <span class="o">:</span> <span class="o">[</span> <span class="o">{</span><span class="s">"stock"</span><span class="o">:</span><span class="s">"32323"</span><span class="o">,</span> <span class="s">"quantity"</span><span class="o">:</span> <span class="mi">2</span><span class="o">},</span>
                              <span class="o">{</span><span class="s">"stock"</span><span class="o">:</span><span class="s">"39494"</span><span class="o">,</span> <span class="s">"quantity"</span><span class="o">:</span> <span class="mi">5</span><span class="o">}</span> <span class="o">],</span>
                  <span class="s">"total"</span> <span class="o">:</span> <span class="mf">320.00</span> <span class="o">}</span>
  
  <span class="nl">Bucket:</span><span class="n">stock</span>
   <span class="o">|</span>
   <span class="o">+-----&gt;</span> <span class="mi">32323</span><span class="o">={</span> <span class="s">"type"</span><span class="o">:</span><span class="s">"keyboard"</span><span class="o">,</span> <span class="s">"model"</span><span class="o">:</span><span class="s">"Logitech 222"</span><span class="o">,</span> <span class="nl">quantity:</span> <span class="mi">15</span> <span class="o">}</span>
   <span class="o">+-----&gt;</span> <span class="mi">39494</span><span class="o">={</span> <span class="s">"type"</span><span class="o">:</span><span class="s">"mouse"</span><span class="o">,</span> <span class="s">"model"</span><span class="o">:</span><span class="s">"Saitek ergo"</span><span class="o">,</span> <span class="nl">quantity:</span> <span class="mi">100</span> <span class="o">}</span>
</pre></div>

<h4>Relationships</h4>

<p>Relationships are managed using the key of the target document. Look to the <code>order/3455</code>. It has the attribute "items" that is a collection of embedded objects. This is a regular 1-N relationship. In the Relational world they are the foreign keys on the target table, while here we have the relationships on the main object that lead the relationship direction. These embedded objects have the attribute "stock" that contains the relationship to the objects stored in the "stock" bucket.</p>

<h4>Helper entries and buckets</h4>

<p>As you can see there is a key "last" in the bucket "order". This is a conventional key that indicates always the last order. In this way you can obtain the last order by asking:</p>

<div class="highlight"><pre><span class="n">HTTP</span> <span class="n">GET</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="p">:</span>8000<span class="o">/</span><span class="n">example</span><span class="o">/</span><span class="n">order</span><span class="o">/</span><span class="n">last</span>
</pre></div>

<p>This key is just a helper entry. It could be useful create one or more helper buckets to store something like:</p>

<ul>
<li>all the orders to ship: <code>/orderToShip/</code>
</li>
<li>the user permissions by creating a new bucket foreach user group. It could be help to use prefix to distinguish it among the others. In the followinng example the prefix used is "user": <code>/user_admin/, /user_basic/, etc.</code>
</li>
<li>all the most recent entries updated. For example it could be useful to display the most recent articles in a CMS like application. The application is responsable to leave only X items</li>
</ul><h4>Write the application code</h4>

<p>The application can be written in any language because the Key/Value Server uses REST/HTTP. The entire application could be written in Javascript and run entirely on the Web Browser with Ajax calls to the Orient Key/Value Server instance.</p>

<p>JSON documents are automatically converted in Javascript object trees. However there are a lot of <a href="http://www.json.org">JSON libraries for any programming language</a>.</p>

<p>The calls to the Key/Value Server can be asynchronous as well using asynchronous Ajax calls.</p>

<p>What do you think about it? Comments are welcome.</p>


  </div>

</div>

<footer>
  <div class="row">
    <div class="six columns">
      <ul class="inline-list">
        <li><a href="/orientdb/"> Home</a></li>
<li><a href="/orientdb/about.html"> About</a></li>
<li class="active"><a href="/orientdb/wiki/Home.html"> Documentation</a></li>
<li><a href="/orientdb/wiki/Download.html"> Downloads</a></li>
<li><a href="/orientdb/community.html"> Community</a></li>
      </ul>
    </div>
    <div class="six columns">
      <p class="copyright">
        Copyright &copy; 2011-2012 NuvolaBase Ltd. <br/>
        <span class="small">NuvolaBase is a registered trademark. All Rights Reserved.</span>
      </p>
    </div>
  </div>
</footer>

<script src="../javascripts/app.js" type="text/javascript"></script>

</body>
</html>