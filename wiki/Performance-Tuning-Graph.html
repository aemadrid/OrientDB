<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en" xmlns="http://www.w3.org/1999/html"><!--<![endif]-->
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width" />
  <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
  <title>Performance Tuning Graph |  OrientDB</title>
  <title>Performance Tuning Graph</title>
  <link href="../stylesheets/foundation.min.css" media="screen" rel="stylesheet" type="text/css" />
<link href="../stylesheets/app.css" media="screen" rel="stylesheet" type="text/css" />
  <script src="../javascripts/modernizr.foundation.js" type="text/javascript"></script>
  
</head>
<body class="orientdb orientdb_wiki orientdb_wiki_Performance-Tuning-Graph">

<header>
  <div class="row">
    <div class="five columns">
      <h1>
        <a href="/orientdb/">
          Orient<span class="highl">DB</span>
        </a>
        <span class="subtitle">The Document/Graph NoSQL Database</span>
      </h1>
    </div>
    <div class="seven columns right">
      <ul class="inline-list">
        <li><a href="/orientdb/"> Home</a></li>
<li><a href="/orientdb/about.html"> About</a></li>
<li class="active"><a href="/orientdb/wiki/Home.html"> Documentation</a></li>
<li><a href="/orientdb/wiki/Download.html"> Downloads</a></li>
<li><a href="/orientdb/community.html"> Community</a></li>
      </ul>
    </div>
  </div>
</header>


<div class="page-header">
  <div class="row">
    <div class="twelve columns">
      <h2>
        <i class="icon-orientdb"></i>
        Performance Tuning Graph
        
          <ul class="bcs">
          
            <li><a href="/orientdb/wiki/Home.html" class="nr1">Home</a></li>
          
          </ul>
        
        
      </h2>
    </div>
  </div>
</div>

<div id="main" class="row wiki">

  <div class="twelve columns content" role="content">

    <p>This guide is specific for the Graph Database. Please be sure to read the generic guide to the <a class="internal present" href="/orientdb/wiki/Performance-Tuning.html">Performance-Tuning</a>.</p>

<h3>Massive Insertion</h3>

<p>See <a class="internal present" href="/orientdb/wiki/Performance-Tuning.html#massive_insertion">Generic improvement on massive insertion</a>.</p>

<h4>Reduce vertex objects</h4>

<p>You can avoid the creation of a new ODocument for each new vertex by reusing it with ODocument.reset() method that clears the instance making it ready for a new insert operation. Bear in mind that you will need to assign the document with the proper class after resetting as it is done in the code below.</p>

<p><em>NOTE: This trick works ONLY IN NON-TRANSACTIONAL contexts, because during transactions the documents could be kept in memory until commit.</em></p>

<p>Example:
</p><div class="highlight"><pre>  <span class="n">db</span><span class="o">.</span><span class="na">declareIntent</span><span class="o">(</span> <span class="k">new</span> <span class="n">OIntentMassiveInsert</span><span class="o">()</span> <span class="o">);</span>
  
  <span class="n">ODocument</span> <span class="n">doc</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="na">createVertex</span><span class="o">(</span><span class="s">"myVertex"</span><span class="o">);</span>
  <span class="k">for</span><span class="o">(</span> <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">1000000</span><span class="o">;</span> <span class="o">++</span><span class="n">i</span> <span class="o">){</span>
    <span class="n">doc</span><span class="o">.</span><span class="na">reset</span><span class="o">();</span>
    <span class="n">doc</span><span class="o">.</span><span class="na">setClassname</span><span class="o">(</span><span class="s">"myVertex"</span><span class="o">);</span>
    <span class="n">doc</span><span class="o">.</span><span class="na">field</span><span class="o">(</span><span class="s">"id"</span><span class="o">,</span> <span class="n">i</span><span class="o">);</span>
    <span class="n">doc</span><span class="o">.</span><span class="na">field</span><span class="o">(</span><span class="s">"name"</span><span class="o">,</span> <span class="s">"Jason"</span><span class="o">);</span>
    <span class="n">doc</span><span class="o">.</span><span class="na">save</span><span class="o">();</span>
  <span class="o">}</span>
  
  <span class="n">db</span><span class="o">.</span><span class="na">declareIntent</span><span class="o">(</span> <span class="kc">null</span> <span class="o">);</span>
</pre></div>

<h4>Cache management</h4>

<p>Graph Database, by default, caches the most used elements. For massive insertion is strongly suggested to disable cache to avoid to keep all the element in memory. <a class="internal present" href="/orientdb/wiki/Performance-Tuning.html#use_the_massive_insert_intent">Massive Insert Intent</a> automatically sets it to false.
</p><div class="highlight"><pre>  <span class="n">graph</span><span class="o">.</span><span class="na">setRetainObjects</span><span class="o">(</span><span class="kc">false</span><span class="o">);</span>
</pre></div>


  </div>

</div>

<footer>
  <div class="row">
    <div class="six columns">
      <ul class="inline-list">
        <li><a href="/orientdb/"> Home</a></li>
<li><a href="/orientdb/about.html"> About</a></li>
<li class="active"><a href="/orientdb/wiki/Home.html"> Documentation</a></li>
<li><a href="/orientdb/wiki/Download.html"> Downloads</a></li>
<li><a href="/orientdb/community.html"> Community</a></li>
      </ul>
    </div>
    <div class="six columns">
      <p class="copyright">
        Copyright &copy; 2011-2012 NuvolaBase Ltd. <br/>
        <span class="small">NuvolaBase is a registered trademark. All Rights Reserved.</span>
      </p>
    </div>
  </div>
</footer>

<script src="../javascripts/app.js" type="text/javascript"></script>

</body>
</html>