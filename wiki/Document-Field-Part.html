<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en" xmlns="http://www.w3.org/1999/html"><!--<![endif]-->
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width" />
  <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
  <title>Document Field Part |  OrientDB</title>
  <title>Document Field Part</title>
  <link href="../stylesheets/foundation.min.css" media="screen" rel="stylesheet" type="text/css" />
<link href="../stylesheets/app.css" media="screen" rel="stylesheet" type="text/css" />
  <script src="../javascripts/modernizr.foundation.js" type="text/javascript"></script>
  
</head>
<body class="orientdb orientdb_wiki orientdb_wiki_Document-Field-Part">

<header>
  <div class="row">
    <div class="five columns">
      <h1>
        <a href="/orientdb/">
          Orient<span class="highl">DB</span>
        </a>
        <span class="subtitle">The Document/Graph NoSQL Database</span>
      </h1>
    </div>
    <div class="seven columns right">
      <ul class="inline-list">
        <li><a href="/orientdb/"> Home</a></li>
<li><a href="/orientdb/about.html"> About</a></li>
<li class="active"><a href="/orientdb/wiki/Home.html"> Documentation</a></li>
<li><a href="/orientdb/wiki/Download.html"> Downloads</a></li>
<li><a href="/orientdb/community.html"> Community</a></li>
      </ul>
    </div>
  </div>
</header>


<div class="page-header">
  <div class="row">
    <div class="twelve columns">
      <h2>
        <i class="icon-orientdb"></i>
        Document Field Part
        
          <ul class="bcs">
          
            <li><a href="/orientdb/wiki/Home.html" class="nr1">Home</a></li>
          
          </ul>
        
        
      </h2>
    </div>
  </div>
</div>

<div id="main" class="row wiki">

  <div class="twelve columns content" role="content">

    <h3>Introduction</h3>

<p>OrientDB has a powerful way to extract portion from document field. This applies to Java API, SQL Where conditions and SQL projections.</p>

<p>To extract parts you have to use the square brackets {{{[# Extract punctual items</p>

<h4>Single item</h4>

<p>Example: tags is a EMBEDDEDSED of strings containing the values <code><a href="%5D%3C/code%3E.">'Smart', 'Geek', 'Cool'</a>}}}.</code></p>

<p>The expression **{{{tags[will return 'Smart'.</p>

<h4>Single items</h4>

<p>Inside square brackets put the items separated by comma ",".</p>

<p>Following the tags example above, the expression <em><code>tags<a href="0%5D%3C/code%3E*">0,2</a>}}}</code></em>* will return a list with <code><a href="'Smart',">'Cool'</a></code>.</p>

<h4>Range items</h4>

<p>Inside square brackets put the item lower and upper bounds separated by "-".</p>

<p>Following the tags example above, the expression *<code>tags[will return a list with <code><a href="1-2%5D%3C/code%3E*">'Geek', 'Cool'</a></code>.</code></p>

<h4>Usage in SQL query</h4>

<p>Example:
</p><div class="highlight"><pre>  <span class="o">&gt;</span> <span class="n">SELECT</span> <span class="o">*</span> <span class="n">FROM</span> <span class="n">profile</span> <span class="n">WHERE</span> <span class="n">phones</span><span class="o">[</span><span class="n">home</span><span class="o">]</span> <span class="n">like</span> <span class="err">'</span><span class="o">+</span><span class="mi">39</span><span class="o">%</span><span class="err">'</span>
</pre></div>
The same is using quotes:
<div class="highlight"><pre><span class="n">phones</span><span class="p">[</span><span class="n">and</span> <span class="n">phones</span><span class="p">[</span>"<span class="n">home</span>"<span class="p">](</span><span class="s">'home'</span><span class="p">])</span>
</pre></div>

<p>You can go in chain (contacts is a map of map):
</p><div class="highlight"><pre>  <span class="o">&gt;</span> <span class="n">SELECT</span> <span class="o">*</span> <span class="n">FROM</span> <span class="n">profile</span> <span class="n">WHERE</span> <span class="n">contacts</span><span class="o">[</span><span class="n">phones</span><span class="o">][</span><span class="n">home</span><span class="o">]</span> <span class="n">like</span> <span class="err">'</span><span class="o">+</span><span class="mi">39</span><span class="o">%</span><span class="err">'</span>
</pre></div>
With List and arrays you can pick an item of a range of its:
<div class="highlight"><pre>  <span class="o">&gt;</span> <span class="n">SELECT</span> <span class="o">*</span> <span class="n">FROM</span> <span class="n">profile</span> <span class="n">WHERE</span> <span class="n">tags</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span> <span class="o">=</span> <span class="err">'</span><span class="n">smart</span><span class="err">'</span>
</pre></div>
and single items:
<div class="highlight"><pre>  <span class="o">&gt;</span> <span class="n">SELECT</span> <span class="o">*</span> <span class="n">FROM</span> <span class="n">profile</span> <span class="n">WHERE</span> <span class="n">tags</span><span class="o">[</span><span class="mi">0</span><span class="o">,</span><span class="mi">3</span><span class="o">,</span><span class="mi">5</span><span class="o">]</span> <span class="n">CONTAINSALL</span> <span class="o">[</span><span class="err">'</span><span class="n">smart</span><span class="err">'</span><span class="o">,</span> <span class="err">'</span><span class="k">new</span><span class="err">'</span><span class="o">,</span> <span class="err">'</span><span class="n">crazy</span><span class="err">'</span><span class="o">]</span>
</pre></div>
and a range of items:
<div class="highlight"><pre>  <span class="o">&gt;</span> <span class="n">SELECT</span> <span class="o">*</span> <span class="n">FROM</span> <span class="n">profile</span> <span class="n">WHERE</span> <span class="n">tags</span><span class="o">[</span><span class="mi">0</span><span class="o">-</span><span class="mi">5</span><span class="o">]</span> <span class="n">CONTAINSALL</span> <span class="o">[</span><span class="err">'</span><span class="n">smart</span><span class="err">'</span><span class="o">,</span> <span class="err">'</span><span class="k">new</span><span class="err">'</span><span class="o">,</span> <span class="err">'</span><span class="n">crazy</span><span class="err">'</span><span class="o">]</span>
</pre></div>

<h4>Condition</h4>

<p>Inside the square brackets you can specify a condition. Today only equals condition is supported.</p>

<p>Example:
</p><div class="highlight"><pre>  <span class="n">employees</span><span class="o">[</span><span class="n">label</span> <span class="o">=</span> <span class="err">'</span><span class="n">Ferrari</span><span class="err">'</span><span class="o">]</span>
</pre></div>

<h5>Use in graphs</h5>

<p>You can cross the graph using the projection. This an example traverse all the retrieved nodes with name "Tom". "out" is outEdges and it's a collection. Until now collection couldn't be traversed with the . notation. Example:
</p><div class="highlight"><pre>  <span class="o">&gt;</span> <span class="n">SELECT</span> <span class="n">out</span><span class="o">.</span><span class="na">in</span> <span class="n">FROM</span> <span class="n">v</span> <span class="n">WHERE</span> <span class="n">name</span> <span class="o">=</span> <span class="err">'</span><span class="n">Tom</span><span class="err">'</span>
</pre></div>
This retrieves all the vertexes connected to the outgoing edges of the Vertices with name = 'Tom'.

<p>Collection can be filtered with the equals operator. This an example traverse all the retrieved nodes with name "Tom". The traversal cross the out edges but only where the linked (in) Vertex has label "Ferrari" and then forward to the:
</p><div class="highlight"><pre>  <span class="o">&gt;</span> <span class="n">SELECT</span> <span class="n">out</span><span class="o">[</span><span class="n">in</span><span class="o">.</span><span class="na">label</span> <span class="o">=</span> <span class="err">'</span><span class="n">Ferrari</span><span class="err">'</span><span class="o">]</span> <span class="n">FROM</span> <span class="n">v</span> <span class="n">WHERE</span> <span class="n">name</span> <span class="o">=</span> <span class="err">'</span><span class="n">Tom</span><span class="err">'</span>
</pre></div>
Or selecting vertexes nodes based on class:
<div class="highlight"><pre>  <span class="o">&gt;</span> <span class="n">SELECT</span> <span class="n">out</span><span class="o">[</span><span class="n">in</span><span class="o">.</span><span class="nd">@class</span> <span class="o">=</span> <span class="err">'</span><span class="n">Car</span><span class="err">'</span><span class="o">]</span> <span class="n">FROM</span> <span class="n">v</span> <span class="n">WHERE</span> <span class="n">name</span> <span class="o">=</span> <span class="err">'</span><span class="n">Tom</span><span class="err">'</span>
</pre></div>
Or both:
<div class="highlight"><pre>  <span class="o">&gt;</span> <span class="n">SELECT</span> <span class="n">out</span><span class="o">[</span><span class="n">label</span><span class="o">=</span><span class="err">'</span><span class="n">drives</span><span class="err">'</span><span class="o">][</span><span class="n">in</span><span class="o">.</span><span class="nd">@class</span> <span class="o">=</span> <span class="err">'</span><span class="n">Car</span><span class="err">'</span><span class="o">]</span> <span class="n">FROM</span> <span class="n">v</span> <span class="n">WHERE</span> <span class="n">name</span> <span class="o">=</span> <span class="err">'</span><span class="n">Tom</span><span class="err">'</span>
</pre></div>
As you can see where multiple follows multiple [the result set is filtered in each step like a Pipeline.

<p>NOTE: This doesn't replace the support of GREMLIN. GREMLIN is much more powerful because it does thousands things more, but it's a simple and, at the same time, powerful tool to traverse relationships.</p>

<h5>Future directions</h5>

<p>In the future you could use the full expression of OrientDB SQL language inside the <a href="%5D"></a>, like:
</p><div class="highlight"><pre>  <span class="o">&gt;</span> <span class="n">SELECT</span> <span class="n">out</span><span class="o">[</span><span class="n">in</span><span class="o">.</span><span class="na">label</span><span class="o">.</span><span class="na">trim</span><span class="o">()</span> <span class="o">=</span> <span class="err">'</span><span class="n">Ferrari</span><span class="err">'</span> <span class="n">AND</span> <span class="n">in</span><span class="o">.</span><span class="nd">@class</span><span class="o">=</span><span class="err">'</span><span class="n">Vehicle</span><span class="err">'</span><span class="o">]</span> <span class="n">FROM</span> <span class="n">v</span> <span class="n">WHERE</span> <span class="n">name</span> <span class="o">=</span> <span class="err">'</span><span class="n">Tom</span><span class="err">'</span>
</pre></div>
But for this you have to wait yet :-) Monitor the issue: <a href="http://code.google.com/p/orient/issues/detail?id=513">http://code.google.com/p/orient/issues/detail?id=513</a>


  </div>

</div>

<footer>
  <div class="row">
    <div class="six columns">
      <ul class="inline-list">
        <li><a href="/orientdb/"> Home</a></li>
<li><a href="/orientdb/about.html"> About</a></li>
<li class="active"><a href="/orientdb/wiki/Home.html"> Documentation</a></li>
<li><a href="/orientdb/wiki/Download.html"> Downloads</a></li>
<li><a href="/orientdb/community.html"> Community</a></li>
      </ul>
    </div>
    <div class="six columns">
      <p class="copyright">
        Copyright &copy; 2011-2012 NuvolaBase Ltd. <br/>
        <span class="small">NuvolaBase is a registered trademark. All Rights Reserved.</span>
      </p>
    </div>
  </div>
</footer>

<script src="../javascripts/app.js" type="text/javascript"></script>

</body>
</html>